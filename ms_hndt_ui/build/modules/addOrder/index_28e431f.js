define("addOrder/index",function(e,i,t){var a=e("components/jquery/jquery"),o=e("components/config/config"),n=e("components/artTemplate/artTemplate"),d=e("components/layer/layer"),r=e("common/common"),s=(e("components/cookie/cookie"),{layerAddOrder:"",itvFile:{},init:function(e){s.layerAddOrder=e,s.setOptions(),a("#save").click(function(){s.validate()}),a("#itvs").click(function(){s.batch("itvs")}),a("#tels").click(function(){s.batch("tels")}),s.radios()},radios:function(){a(".radios input[type='radio']").click(function(){var e=a(this).attr("id");"itvRadio"===e?(a("#itvGround").removeClass("hidden"),a("#ipGround").addClass("hidden")):"telRadio"===e&&(a("#ipGround").removeClass("hidden"),a("#itvGround").addClass("hidden"))})},setOptions:function(){var e={data:o.product},i=n("productData",e);a("#product").html(i)},validate:function(){var e=a("#itv").val(),i=s.itvFile,t=a("#product").val(),n=/^3(\d{13}|\d{17})$/;if(i.name){var c=new FormData;r.hasUserCookie(function(e){c.append("custFile",i),c.append("userId",e.userId),c.append("proCode",t),r.uploadfile(o.saveOrders,c,function(){window.location.reload()})})}else{if(!n.test(e))return d.msg("ITV账号必须输入正确！"),!1;if(""===t)return d.msg("必须选择一项订购产品！"),!1;var l={proCode:t,custKey:e,source:3};s.postParame(l,o.saveOrder)}},postParame:function(i,t){r.ajax("post",t,i,function(){s.reloadForm();var i=e("orderMain/index");i.getParame({cur:0,pageSize:o.pageSize})},"addOrder")},batch:function(e){"itvs"===e&&(a("#itvFile").click(),s.uploadValidate("#itvFile"))},uploadValidate:function(e){a(e).change(function(){a(this).removeClass("hidden"),a("#itv,#itvs").hide();var e=this.files[0];-1===e.name.indexOf("xls")?d.msg("请上传excel文件！"):s.itvFile=e})},reloadForm:function(){a("#itv,#itvFile").val(""),a("#itv,#itvs").show(),a("#itvFile").addClass("hidden")}});t.exports=s});